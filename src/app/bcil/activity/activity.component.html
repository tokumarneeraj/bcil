<div class="modal fade" bsModal #editorModal="bs-modal" [config]="{backdrop: 'static'}" tabindex="-1" >
    <div class="modal-dialog modal-lg" style="max-height: 600px;
    overflow: auto;">
        <div class="modal-content">
            <div class="modal-header">
                <h4>{{array?.tablename}}</h4>
                <button type="button" class="close float-right" title="Close" (click)="editorModal.hide()">
          <span aria-hidden="true">&times;</span>
        </button>
            </div>
            <div class="modal-body">
              <form [formGroup]="ForwardForm">

                <div class="form-group row" *ngIf="activebtn?.form?.lmassigned">
                  <div class="col-sm-12">
                    <label class="col-form-label">Select Legal Manager</label>

                    <select type="text" class="form-control" formControlName="assigntolm" [ngClass]="{ 'is-invalid': submitted && f.assigntolm.errors }"  [(ngModel)]="selectedlm">
                      <option value="" selected>--select--</option>
                      <option *ngFor="let data of rowslm" value="{{data.id}}">{{data.userName}}</option>

                    </select>


                  </div>
                </div>


                <div class="form-group row">
                  <div class="col-sm-12">
                    <label class="col-form-label">Subject</label>
                    <input type="text" class="form-control" formControlName="subject" [ngClass]="{ 'is-invalid': submitted && f.subject.errors }" />
                    <p *ngIf="submitted && f.subject.errors" class="invalid-feedback">Subject is required</p>
                           

                  </div>
                </div>
                <div class="form-group row" *ngIf="activebtn?.form?.typeflied">
                  <div class="col-sm-12">
                    <label class="col-form-label">Type</label>
                    <select type="text" class="form-control" formControlName="type" [ngClass]="{ 'is-invalid': submitted && f.type.errors }">
                      <option value="">Choose</option>
                      <option value="MOU">MOU</option>
                      <option value="NDA">NDA</option>
                      <option value="Work Order">Work Order</option>
                      <option value="Others">Others</option>
                    </select>


                  </div>
                </div>
                <div class="form-group row" *ngIf="activebtn?.form?.organization || array?.organization">
                  <div class="col-sm-12">
                    <label class="col-form-label">Organization</label>
                    <select type="text"  class="form-control" name="organization" formControlName="organization" (change)="organizationchnage($event.target.value)">
                      <option value="" selected>--select--</option>
                      <option  *ngFor="let org of organizations" [attr.data-message-id]="org.key" value="{{org.value}}">{{org.value}}</option>
                      <!-- <option value="MOU">MOU</option>
                      <option value="NDA">NDA</option>
                      <option value="Work Order">Work Order</option>
                      <option value="Others">Others</option> -->
                    </select>


                  </div>
                </div>
              
                <div class="form-group row" *ngIf="activebtn?.form?.assign ||viewassign">
                  <div class="col-sm-12">
                    <label class="col-form-label">{{activebtn?.form?.assignlabel ||array?.assignlabel}}</label>
                    <select type="text" class="form-control" name="assignto" formControlName="assignto" [(ngModel)]="selectassign">
                      <option value="" selected>--select--</option>
                      <option *ngFor="let user of rowsassign" value="{{user.id}}">{{user.userName}} <span *ngIf="activebtn?.form?.assignarray?.length>1 || array?.assignarray?.length>1">({{user.roles[0]}})</span></option>
                      <!-- <option value="MOU">MOU</option>
                      <option value="NDA">NDA</option>
                      <option value="Work Order">Work Order</option>
                      <option value="Others">Others</option> -->
                    </select>


                  </div>
                </div>

                <div class="form-group row" *ngIf="activebtn?.form?.bdoassigned">
                    <div class="col-sm-12">
                      <label class="col-form-label">BDM</label>
                      <select type="text" class="form-control" name="assigntobdo" formControlName="assigntobdo" [(ngModel)]="selectedbdm">
                        <option value="" selected>--select--</option>
                        <option *ngFor="let user of rowsbdm" value="{{user.id}}">{{user.userName}}</option>
                        <!-- <option value="MOU">MOU</option>
                        <option value="NDA">NDA</option>
                        <option value="Work Order">Work Order</option>
                        <option value="Others">Others</option> -->
                      </select>
  
  
                    </div>
                  </div>
                  <ng-container *ngIf="activebtn?.form?.milestone">
                  
                  <div class="row">
                    <div class="col-sm-12">

                      <label class="col-form-label">Milestone</label>
                      <div class="row">
                        <div class="col-sm-1">
                          </div>
                    <div class="col-sm-3">
                      <label>Milestone</label>
                      </div>
                      
                        <div class="col-sm-3">
                          <label>Payment term</label>
                          </div>
                          <div class="col-sm-3">
                        <label>Timeline</label>
                        </div>
                        </div>
                    </div>
                      </div>
                  <div formArrayName="milestonedata" *ngFor="let item of milestonedata.controls; let i = index" class="form-group">
                    <div [formGroupName]="i">
                     
                        <input type="hidden" formControlName="ID" />
                       
                          <div class="row">
                            <div class="col-sm-1">
                              {{i+1}}
                            </div>
                            <div class="col-sm-3">
<input type="text"  class="form-control"  formControlName="milestone" id="milestone+i"/>
                              </div>
                              <div class="col-sm-3">
                                <input type="text"  class="form-control" formControlName="paymentterm" id="paymentterm+i"/>
                                                              </div>
                                                              <div class="col-sm-3">
                                                                <input type="text"  class="form-control"  formControlName="timeline" id="timeline+i"/>
                                                                                              </div>
      <div class="col-md-1">
 <button *ngIf="milestonedata.length>1" (click)="deleteitem(i)" class="btn btn-sm"><i class="fa fa-trash"></i></button>
                                                                              
                                                                                              </div>
                              </div>
                            
                            </div>

                              </div>
                              <div class="row">
                                <div class="col-md-2">
                                  <button class="btn btn-success btn-sm" type="button" (click)="addItemButtonClick()" ><i class="fa fa-plus"></i></button>
                    
                    
                                </div>
                              </div>
                            </ng-container>
                            <ng-container *ngIf="fields?.length>0" >
                            <form [formGroup]="dynamicForm" >
                            <ng-container *ngFor="let controls of fields">
                              <div class="form-group row">
                                <div class="col-sm-12">
                                  <label class="col-form-label"> {{controls.label}}</label>
                             
                              <input [type]="controls.type" class="form-control" [formControlName]="controls.label"/>
                                <ng-container *ngFor="let validation of controls.validations">
                                  <span *ngIf="dynamicForm.controls[controls.label].touched && dynamicForm.controls[controls.label].errors">
                                    <p *ngIf="dynamicForm.controls[controls.label].errors[validation.name]">
                                      {{validation.message}}
                                    </p>
                                  </span>
                              </ng-container>
                              </div>
                              </div>
                            </ng-container>
                            {{dynamicForm.value|json}}
                          </form>
                            </ng-container>
                <div class="form-group row">
                  <div class="col-sm-12">
                    <label class="col-form-label">Remarks</label>
                    <textarea type="text" class="form-control" formControlName="remarks" [ngClass]="{ 'is-invalid': submitted && f.remarks.errors }">
                                </textarea>

                  </div>
                </div>
                <div class="form-group row">
                  <div class="col-sm-12">
                    <label class="col-form-label">Upload</label>
                    <input type="file" accept="*" class="form-control" (change)="fileChangeEvent($event)" />
                    <input type="hidden" name="files" formControlName="files" /> 
                    <p *ngIf="submitted && f.files.errors" class="invalid-feedback">File is required</p>
                  
                    <span class="text-danger float-right">*For multiple files, please compress and upload.(zip format)</span>

                  </div>
                </div>

                <div class="form-group row"  *ngIf="activebtn?.form?.reminder">
<div class="col-sm-6"> 
    <label class="col-form-label">Default Reminder</label>
    <input type="radio" class="form-control" name="remindertype" value="default"  formControlName="remindertype" (change)="reminderchange('default')"/>
 
</div>
    <div class="col-sm-6"> 
        <label class="col-form-label">Custom Reminder</label>
        <input type="radio" class="form-control" name="remindertype" value="custom" formControlName="remindertype" (change)="reminderchange('custom')"/>
           
                  </div>
                </div>
                 <div class="form-group row"  *ngIf="activebtn?.form?.reminder">
                    <app-reminder *ngIf="customrem" [customrem]="customrem" [appref]="appref" [type]="type" style="width:100%"></app-reminder>
                 </div>

                
                   
              

                <div class="form-group row">
                  <div class="col-sm-6">
                    <!-- <button type="submit"
                            class="btn btn-success"
                            (click)="uploadFile()">
                      Upload File
                    </button> -->
                    <button type="submit" class="btn btn-success"  (click)="uploadFile()" [disabled]="loading">
                        <i *ngIf="loading" class='fa fa-circle-o-notch fa-spin'></i> {{loading ? 'Saving...' : 'Save'}}
                      </button>
                  </div>
                  

                </div>


              </form>
                <!-- <ul class="list-unstyled">
                    <li *ngFor="let role of rows"><input type="checkbox" name="checkbox-{{role.name}}" [disabled]="!canManageRoles" [(ngModel)]="selectedValues1[role.id+uservalue]" />{{role.name}}</li>
                </ul>
                <button type="button" [ngClass]="!canManageRoles ? 'd-none': ''" [disabled]="!canManageRoles" (click)="addrolepermissionsubmit()" class="btn btn-sm btn-outline-primary"><i class="fa fa-save"></i> Submit</button> -->

            </div>
        </div>
    </div>
  </div>